#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 6 0 1 8
    bytecblock 0x2a337771 0x601d46de 0x151f7c75
    // tests/approvals/circular-reference-2.algo.ts:7
    // export class ContractTwo extends Contract {
    txn NumAppArgs
    bz main___algots__.defaultCreate@10
    txn OnCompletion
    !
    assert // OnCompletion must be NoOp
    txn ApplicationID
    assert
    bytec_0 // method "test(uint64)void"
    bytec_1 // method "test2()byte[4]"
    pushbytes 0x940b1de5 // method "test3(uint64)void"
    txna ApplicationArgs 0
    match main_test_route@4 main_test2_route@5 main_test3_route@6
    err

main_test3_route@6:
    // tests/approvals/circular-reference-2.algo.ts:16
    // test3(appId: Application) {
    txna ApplicationArgs 1
    dup
    len
    intc_3 // 8
    ==
    assert // invalid number of bytes for arc4.uint64
    btoi
    // tests/approvals/circular-reference-2.algo.ts:17-19
    // itxnCompose.begin<typeof ContractOne.prototype.test2>({
    //   appId,
    // })
    itxn_begin
    bytec_1 // method "test2()byte[4]"
    itxn_field ApplicationArgs
    dup
    itxn_field ApplicationID
    intc_0 // appl
    itxn_field TypeEnum
    intc_1 // 0
    itxn_field Fee
    // tests/approvals/circular-reference-2.algo.ts:20-22
    // itxnCompose.next<typeof ContractOne.prototype.test2>({
    //   appId,
    // })
    itxn_next
    bytec_1 // method "test2()byte[4]"
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    intc_0 // appl
    itxn_field TypeEnum
    intc_1 // 0
    itxn_field Fee
    // tests/approvals/circular-reference-2.algo.ts:23
    // itxnCompose.submit()
    itxn_submit
    // tests/approvals/circular-reference-2.algo.ts:26
    // const res1 = convertBytes<StaticBytes<4>>(op.GITxn.lastLog(1), { prefix: 'log', strategy: 'validate' }).bytes
    gitxn 1 LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    dup
    len
    pushint 4 // 4
    ==
    assert // invalid number of bytes for arc4.static_array<arc4.uint8, 4>
    // tests/approvals/circular-reference-2.algo.ts:27
    // const res2 = convertBytes<StaticBytes<4>>(op.GITxn.lastLog(0), { prefix: 'log', strategy: 'validate' }).bytes
    gitxn 0 LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    dup
    len
    pushint 4 // 4
    ==
    assert // invalid number of bytes for arc4.static_array<arc4.uint8, 4>
    // tests/approvals/circular-reference-2.algo.ts:29
    // assert(expected === res1)
    bytec_0 // method "test(uint64)void"
    uncover 2
    ==
    assert
    // tests/approvals/circular-reference-2.algo.ts:30
    // assert(expected === res2)
    bytec_0 // method "test(uint64)void"
    ==
    // tests/approvals/circular-reference-2.algo.ts:16
    // test3(appId: Application) {
    return

main_test2_route@5:
    // tests/approvals/circular-reference-2.algo.ts:12
    // test2() {
    pushbytes 0x151f7c752a337771
    log
    intc_2 // 1
    return

main_test_route@4:
    // tests/approvals/circular-reference-2.algo.ts:8
    // test(appId: Application) {
    txna ApplicationArgs 1
    dup
    len
    intc_3 // 8
    ==
    assert // invalid number of bytes for arc4.uint64
    btoi
    // tests/approvals/circular-reference-2.algo.ts:9
    // abiCall<typeof ContractOne.prototype.test>({ appId })
    itxn_begin
    bytec_0 // method "test(uint64)void"
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    intc_0 // appl
    itxn_field TypeEnum
    intc_1 // 0
    itxn_field Fee
    itxn_submit
    // tests/approvals/circular-reference-2.algo.ts:8
    // test(appId: Application) {
    intc_2 // 1
    return

main___algots__.defaultCreate@10:
    // tests/approvals/circular-reference-2.algo.ts:7
    // export class ContractTwo extends Contract {
    txn OnCompletion
    !
    txn ApplicationID
    !
    &&
    assert // OnCompletion must be NoOp && can only call when creating
    intc_2 // 1
    return
