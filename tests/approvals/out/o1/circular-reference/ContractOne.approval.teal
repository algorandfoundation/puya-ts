#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 1 6 0 8
    bytecblock 0x2a337771 0x601d46de 0x151f7c75
    // tests/approvals/circular-reference.algo.ts:6
    // export class ContractOne extends Contract {
    txn NumAppArgs
    bz main___algots__.defaultCreate@10
    txn OnCompletion
    !
    assert
    txn ApplicationID
    assert
    bytec_0 // method "test(uint64)void"
    bytec_1 // method "test2()byte[4]"
    pushbytes 0x940b1de5 // method "test3(uint64)void"
    txna ApplicationArgs 0
    match test main_test2_route@5 test3
    err

main_test2_route@5:
    // tests/approvals/circular-reference.algo.ts:10
    // test2() {
    pushbytes 0x151f7c752a337771
    log
    intc_0 // 1
    return

main___algots__.defaultCreate@10:
    // tests/approvals/circular-reference.algo.ts:6
    // export class ContractOne extends Contract {
    txn OnCompletion
    !
    txn ApplicationID
    !
    &&
    return


// tests/approvals/circular-reference.algo.ts::ContractOne.test[routing]() -> void:
test:
    // tests/approvals/circular-reference.algo.ts:7
    // test(appId: Application) {
    txna ApplicationArgs 1
    dup
    len
    intc_3 // 8
    ==
    assert // invalid number of bytes for arc4.uint64
    dup
    btoi
    // tests/approvals/circular-reference.algo.ts:8
    // abiCall<typeof ContractTwo.prototype.test>({ appId })
    itxn_begin
    itxn_field ApplicationID
    bytec_0 // method "test(uint64)void"
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    intc_1 // appl
    itxn_field TypeEnum
    intc_2 // 0
    itxn_field Fee
    itxn_submit
    // tests/approvals/circular-reference.algo.ts:7
    // test(appId: Application) {
    intc_0 // 1
    return


// tests/approvals/circular-reference.algo.ts::ContractOne.test3[routing]() -> void:
test3:
    // tests/approvals/circular-reference.algo.ts:14
    // test3(appId: Application) {
    txna ApplicationArgs 1
    dup
    len
    intc_3 // 8
    ==
    assert // invalid number of bytes for arc4.uint64
    btoi
    // tests/approvals/circular-reference.algo.ts:15-17
    // itxnCompose.begin<typeof ContractTwo.prototype.test2>({
    //   appId,
    // })
    itxn_begin
    dup
    itxn_field ApplicationID
    bytec_1 // method "test2()byte[4]"
    itxn_field ApplicationArgs
    intc_1 // appl
    itxn_field TypeEnum
    intc_2 // 0
    itxn_field Fee
    // tests/approvals/circular-reference.algo.ts:18-20
    // itxnCompose.next<typeof ContractTwo.prototype.test2>({
    //   appId,
    // })
    itxn_next
    itxn_field ApplicationID
    bytec_1 // method "test2()byte[4]"
    itxn_field ApplicationArgs
    intc_1 // appl
    itxn_field TypeEnum
    intc_2 // 0
    itxn_field Fee
    // tests/approvals/circular-reference.algo.ts:21
    // itxnCompose.submit()
    itxn_submit
    // tests/approvals/circular-reference.algo.ts:24
    // const res1 = convertBytes<StaticBytes<4>>(op.GITxn.lastLog(1), { prefix: 'log', strategy: 'validate' }).bytes
    gitxn 1 LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    dup
    len
    pushint 4
    ==
    assert // invalid number of bytes for arc4.static_array<arc4.uint8, 4>
    // tests/approvals/circular-reference.algo.ts:25
    // const res2 = convertBytes<StaticBytes<4>>(op.GITxn.lastLog(0), { prefix: 'log', strategy: 'validate' }).bytes
    gitxn 0 LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    dup
    len
    pushint 4
    ==
    assert // invalid number of bytes for arc4.static_array<arc4.uint8, 4>
    // tests/approvals/circular-reference.algo.ts:27
    // assert(expected === res1)
    bytec_0 // method "test(uint64)void"
    uncover 2
    ==
    assert
    // tests/approvals/circular-reference.algo.ts:28
    // assert(expected === res2)
    bytec_0 // method "test(uint64)void"
    ==
    assert
    // tests/approvals/circular-reference.algo.ts:14
    // test3(appId: Application) {
    intc_0 // 1
    return
