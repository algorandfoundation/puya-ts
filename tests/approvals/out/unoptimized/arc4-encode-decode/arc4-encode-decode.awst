contract Arc4EncodeDecode
{
  approvalProgram(): bool
  {
    return arc4Router()
  }
  
  clearProgram(): bool
  {
    return True
  }
  
  testEncoding(a: uint64, b: bool, c: biguint, d: bytes, e: string, f: arc4.static_array<arc4.byte,32>, g: bytes[12]): void
  {
    ensure_budget(1400, 0)
    assert(ARC4_ENCODE(a, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(a, wtype=arc4.uint64)))
    assert(ARC4_ENCODE(b, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(b, wtype=arc4.bool)))
    assert(ARC4_ENCODE(c, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(c, wtype=arc4.uint512)))
    assert(ARC4_ENCODE(d, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(d, wtype=arc4.dynamic_array<arc4.byte>)))
    assert(ARC4_ENCODE(e, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(e, wtype=arc4.dynamic_array<arc4.byte>)))
    assert(ARC4_ENCODE(#{ a: a, b: d }, wtype=bytes) == reinterpret_cast<bytes>(new TestStruct(a=($0 = #{ a: ARC4_ENCODE(a, wtype=arc4.uint64), b: ARC4_ENCODE(d, wtype=arc4.dynamic_array<arc4.byte>) }).a, b=$0.b)))
    assert(ARC4_ENCODE(#{ a: a, b: d }, wtype=bytes) == ARC4_ENCODE(#{ a: a, b: ARC4_ENCODE(d, wtype=arc4.dynamic_array<arc4.byte>) }, wtype=bytes))
    assert(ARC4_ENCODE(#{ a: a, b: g }, wtype=bytes) == ARC4_ENCODE(#{ a: a, b: ARC4_ENCODE(reinterpret_cast<bytes>(g), wtype=arc4.static_array<arc4.byte,12>) }, wtype=bytes))
    assert(reinterpret_cast<bytes>(f) == reinterpret_cast<bytes>(f))
    assert(ARC4_ENCODE(g, wtype=bytes) == reinterpret_cast<bytes>(ARC4_ENCODE(reinterpret_cast<bytes>(g), wtype=arc4.static_array<arc4.byte,12>)))
    assert(ARC4_ENCODE(#[a], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.uint64,1>(ARC4_ENCODE(a, wtype=arc4.uint64))))
    assert(ARC4_ENCODE(#[b], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.bool,1>(ARC4_ENCODE(b, wtype=arc4.bool))))
    assert(ARC4_ENCODE(#[c], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.uint512,1>(ARC4_ENCODE(c, wtype=arc4.uint512))))
    assert(ARC4_ENCODE(#[d], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.dynamic_array<arc4.byte>,1>(ARC4_ENCODE(d, wtype=arc4.dynamic_array<arc4.byte>))))
    assert(ARC4_ENCODE(#[e], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.dynamic_array<arc4.byte>,1>(ARC4_ENCODE(e, wtype=arc4.dynamic_array<arc4.byte>))))
    assert(ARC4_ENCODE(#[f], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.static_array<arc4.byte,32>,1>(f)))
    assert(ARC4_ENCODE(#[g], wtype=bytes) == reinterpret_cast<bytes>(new arc4.static_array<arc4.static_array<arc4.byte,12>,1>(ARC4_ENCODE(reinterpret_cast<bytes>(g), wtype=arc4.static_array<arc4.byte,12>))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<uint64>(a), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.uint64>(ARC4_ENCODE(a, wtype=arc4.uint64))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<bool>(b), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.bool>(ARC4_ENCODE(b, wtype=arc4.bool))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<biguint>(c), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.uint512>(ARC4_ENCODE(c, wtype=arc4.uint512))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<bytes>(d), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.dynamic_array<arc4.byte>>(ARC4_ENCODE(d, wtype=arc4.dynamic_array<arc4.byte>))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<string>(e), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.dynamic_array<arc4.byte>>(ARC4_ENCODE(e, wtype=arc4.dynamic_array<arc4.byte>))))
    assert(ARC4_ENCODE(new arc4.dynamic_array<arc4.static_array<arc4.byte,32>>(f), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.static_array<arc4.byte,32>>(f)))
    assert(ARC4_ENCODE(new arc4.dynamic_array<bytes[12]>(g), wtype=bytes) == reinterpret_cast<bytes>(new arc4.dynamic_array<arc4.static_array<arc4.byte,12>>(ARC4_ENCODE(reinterpret_cast<bytes>(g), wtype=arc4.static_array<arc4.byte,12>))))
    assert(size_of(arc4.uint64) == 8)
    assert(size_of(arc4.bool) == 1)
    assert(size_of(arc4.uint512) == 64)
    assert(size_of(arc4.tuple<arc4.uint64,arc4.uint64,arc4.bool>) == 17)
    assert(size_of(arc4.tuple<arc4.uint64,arc4.uint64,arc4.bool,arc4.bool>) == 17)
    assert(size_of(arc4.tuple<arc4.static_array<arc4.bool,10>,arc4.bool,arc4.bool>) == 3)
    assert(size_of(arc4.tuple<arc4.tuple<arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool,arc4.bool>,arc4.bool,arc4.bool>) == 3)
    assert(size_of(arc4.static_array<arc4.byte,12>) == 12)
    assert(size_of(StaticMutableObject) == 20)
  }
  
  testDecoding(a: uint64, a_bytes: bytes, b: bool, b_bytes: bytes, c: biguint, c_bytes: bytes, d: string, d_bytes: bytes, e: tests/approvals/arc4-encode-decode.algo.ts::TestObj, e_bytes: bytes, f: arc4.static_array<arc4.byte,32>, f_bytes: bytes, g: bytes[12], g_bytes: bytes): void
  {
    assert(ARC4_DECODE(reinterpret_cast<arc4.uint64>(a_bytes)) == a)
    assert(ARC4_DECODE(reinterpret_cast<arc4.bool>(b_bytes)) == b)
    assert(ARC4_DECODE(reinterpret_cast<arc4.uint512>(c_bytes)) == c)
    assert(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.byte>>(d_bytes)) == d)
    assert(&&(reinterpret_cast<bytes>(ARC4_DECODE(reinterpret_cast<TestObj>(e_bytes)).a) == reinterpret_cast<bytes>(e.a), reinterpret_cast<bytes>(ARC4_DECODE(reinterpret_cast<TestObj>(e_bytes)).b) == reinterpret_cast<bytes>(e.b)), comment=assert target is match for conditions)
    lenPrefix: bytes = itob(1).slice(6, 8)
    offsetHeader: bytes = itob(2).slice(6, 8)
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.uint64>>(concat(lenPrefix, a_bytes))).length == 1, ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.uint64>>(concat(lenPrefix, a_bytes)))[0] == a), comment=Array of uint64 matches)
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.bool>>(concat(lenPrefix, b_bytes))).length == 1, ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.bool>>(concat(lenPrefix, b_bytes)))[0] == b), comment=Array of boolean matches)
    log(concat(lenPrefix, c_bytes))
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.uint512>>(concat(lenPrefix, c_bytes))).length == 1, ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.uint512>>(concat(lenPrefix, c_bytes)))[0] == c), comment=Array of biguint matches)
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.dynamic_array<arc4.byte>>>("" + lenPrefix + offsetHeader + d_bytes)).length == 1, ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.dynamic_array<arc4.byte>>>("" + lenPrefix + offsetHeader + d_bytes))[0] == d), comment=Array of string matches)
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<TestObj>>("" + lenPrefix + offsetHeader + e_bytes)).length == 1, &&(reinterpret_cast<bytes>(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<TestObj>>("" + lenPrefix + offsetHeader + e_bytes))[0].a) == reinterpret_cast<bytes>(e.a), reinterpret_cast<bytes>(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<TestObj>>("" + lenPrefix + offsetHeader + e_bytes))[0].b) == reinterpret_cast<bytes>(e.b))), comment=Array of struct matches)
    assert(&&(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.static_array<arc4.byte,32>>>("" + lenPrefix + f_bytes)).length == 1, reinterpret_cast<bytes>(ARC4_DECODE(reinterpret_cast<arc4.dynamic_array<arc4.static_array<arc4.byte,32>>>("" + lenPrefix + f_bytes))[0]) == reinterpret_cast<bytes>(f)), comment=Array of address matches)
    assert(ARC4_DECODE(reinterpret_cast<arc4.static_array<arc4.byte,12>>(g_bytes)) == g)
  }
  
  __algots__.defaultCreate(): void
  {
  }
  
}